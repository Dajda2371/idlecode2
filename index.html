<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>IDLE</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <style type="text/tailwindcss">
        @layer base {
            body {
                @apply bg-white;
                font-family: 'Courier New', Courier, monospace;
            }
        }
        :root {
            --idle-bg: #ffffff;
            --idle-menu-bg: #f0f0f0;
            --idle-title-bg: #ffffff;
            --sidebar-bg: #f3f3f3;
            --sidebar-border: #e0e0e0;
            --idle-keyword: #ff7b00;
            --idle-builtin: #900090;
            --idle-string: #00aa00;
            --idle-comment: #dd0000;
            --idle-text: #000000;
            --explorer-bg: #f3f3f3;
        }

        /* Syntax Highlighting (highlight.js mapping) */
        .hljs-keyword, .hljs-selector-tag, .hljs-literal, .hljs-section, .hljs-link { color: var(--idle-keyword); }
        .hljs-function .hljs-keyword { color: var(--idle-keyword); }
        .hljs-built_in, .hljs-attr, .hljs-attribute, .hljs-code, .hljs-title.class_ { color: var(--idle-builtin); }
        .hljs-string, .hljs-meta .hljs-string, .hljs-type, .hljs-doctag { color: var(--idle-string); }
        .hljs-comment, .hljs-quote, .hljs-variable.language_ { color: var(--idle-comment); }
        .hljs-number, .hljs-regexp, .hljs-symbol, .hljs-bullet, .hljs-meta { color: var(--idle-text); } /* IDLE usually just black for numbers */
        .hljs-title.function_ { color: #0000ff; } /* IDLE uses blue for function defs */

        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 20;
            font-size: 18px;
        }
        .syntax-keyword { color: var(--idle-keyword); font-weight: bold; }
        .syntax-builtin { color: var(--idle-builtin); }
        .syntax-string { color: var(--idle-string); }
        .syntax-comment { color: var(--idle-comment); }
        .syntax-normal { color: var(--idle-text); }
        .window-title-bar {
            background: linear-gradient(90deg, #0054e3 0%, #27c4fb 100%);
            color: white;
            font-family: 'Tahoma', sans-serif;
            font-size: 12px;
            padding: 3px 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .window-controls {
            display: flex;
            gap: 2px;
        }
        .control-btn {
            width: 16px;
            height: 16px;
            background: #ebebeb;
            border: 1px solid #707070;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
            font-weight: bold;
            font-size: 10px;
        }
        .sidebar-header-btn {
            @apply p-1 hover:bg-gray-200 rounded cursor-pointer flex items-center justify-center text-gray-600;
        }
        .tree-item {
            @apply flex items-center gap-1.5 px-2 py-0.5 hover:bg-gray-200 cursor-pointer text-[13px] text-gray-700 font-sans;
        }
        .context-menu {
            @apply absolute bg-white border border-gray-300 shadow-lg rounded py-1 z-50 min-w-[150px];
        }
        .context-menu-item {
            @apply px-4 py-1 text-[13px] hover:bg-blue-600 hover:text-white cursor-pointer block;
        }

    </style>
</head>

<body class="h-screen flex flex-col overflow-hidden">


    <div class="flex-1 flex overflow-hidden">
        <aside
            class="w-[260px] bg-[var(--explorer-bg)] border-r border-[var(--sidebar-border)] flex flex-col font-sans select-none">
            <div class="px-3 py-2 flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined">close</span>
                    <span class="text-[11px] font-bold text-gray-600 tracking-wider">EXPLORER</span>
                </div>
                <span class="material-symbols-outlined text-gray-600 cursor-pointer">more_horiz</span>
            </div>
            <div class="overflow-y-auto flex-1" id="file-tree">
            </div>
        </aside>
        <main class="flex-1 flex flex-col bg-white border-r border-gray-200 overflow-hidden">
            <!-- Editor Area -->
            <div class="flex-1 flex overflow-auto min-h-[200px]" id="editor-area">
                <div class="w-10 text-right pr-2 text-gray-400 select-none font-mono text-[13px] leading-[20px] pt-4 bg-[#f3f3f3]"
                    id="line-numbers"></div>
                <div class="flex-1 outline-none font-mono text-[13px] leading-[20px] whitespace-pre pl-2 pt-4"
                    id="code-content" contenteditable="false" spellcheck="false"></div>
                <!-- Modals (Hidden by default) -->

                <!-- Configure IDLE Modal -->
                <div id="settings-modal"
                    class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
                    <div class="bg-white border-2 border-gray-400 p-1 shadow-xl w-[500px] text-[13px]">
                        <div
                            class="bg-gray-100 border-b border-gray-300 px-2 py-1 flex justify-between items-center mb-2">
                            <span class="font-bold">IDLE Preferences</span>
                            <button id="close-settings" class="text-gray-500 hover:text-black">X</button>
                        </div>
                        <div class="p-4 space-y-4">
                            <!-- Font Tab -->
                            <div class="border border-gray-300 p-2">
                                <h3 class="font-bold mb-2">Fonts/Tabs</h3>
                                <div class="flex items-center gap-2 mb-2">
                                    <label>Font Face:</label>
                                    <select id="font-family-select" class="border border-gray-400 px-1">
                                        <option value="'Courier New', Courier, monospace">Courier New</option>
                                        <option value="'Menlo', 'Consolas', monospace">Menlo/Consolas</option>
                                        <option value="'Fira Code', monospace">Fira Code</option>
                                    </select>
                                </div>
                                <div class="flex items-center gap-2">
                                    <label>Font Size:</label>
                                    <input type="number" id="font-size-input" class="border border-gray-400 w-16 px-1"
                                        value="13" min="8" max="72">
                                </div>
                            </div>

                            <!-- Theme Tab (Simple) -->
                            <div class="border border-gray-300 p-2">
                                <h3 class="font-bold mb-2">Theme</h3>
                                <div class="flex items-center gap-4">
                                    <label><input type="radio" name="theme" value="classic" checked> IDLE
                                        Classic</label>
                                    <label><input type="radio" name="theme" value="dark"> IDLE Dark</label>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end gap-2 p-2 border-t border-gray-200 bg-gray-50">
                            <button id="apply-settings"
                                class="px-3 py-1 bg-gray-200 border border-gray-400 hover:bg-gray-300">Apply</button>
                            <button id="cancel-settings"
                                class="px-3 py-1 bg-gray-200 border border-gray-400 hover:bg-gray-300">Cancel</button>
                        </div>
                    </div>
                </div>

                <!-- Find/Replace Bar (Overlay) -->
                <div id="find-bar"
                    class="absolute top-2 right-8 bg-white border border-gray-400 shadow-md p-2 text-[12px] flex items-center gap-2 hidden z-40">
                    <span class="font-bold text-gray-600">Find:</span>
                    <input type="text" id="find-input"
                        class="border border-gray-300 px-1 w-32 outline-none focus:border-blue-400">
                    <button id="find-next-btn"
                        class="px-2 bg-gray-100 border border-gray-300 hover:bg-gray-200">↓</button>
                    <button id="find-prev-btn"
                        class="px-2 bg-gray-100 border border-gray-300 hover:bg-gray-200">↑</button>
                    <button id="find-close-btn" class="ml-2 text-gray-500 hover:text-red-500">X</button>
                </div>

                <!-- Replace Bar (Overlay) -->
                <div id="replace-bar"
                    class="absolute top-10 right-8 bg-white border border-gray-400 shadow-md p-2 text-[12px] flex flex-col gap-1 hidden z-40 w-[300px]">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-bold text-gray-600">Replace</span>
                        <button id="replace-close-btn" class="text-gray-500 hover:text-red-500">X</button>
                    </div>
                    <div class="flex items-center gap-2">
                        <label class="w-12 text-right">Find:</label>
                        <input type="text" id="replace-find-input"
                            class="border border-gray-300 px-1 flex-1 outline-none">
                    </div>
                    <div class="flex items-center gap-2">
                        <label class="w-12 text-right">Rep:</label>
                        <input type="text" id="replace-input" class="border border-gray-300 px-1 flex-1 outline-none">
                    </div>
                    <div class="flex justify-end gap-2 mt-2">
                        <button id="replace-next-btn"
                            class="px-2 bg-gray-100 border border-gray-300 hover:bg-gray-200">Find Next</button>
                        <button id="replace-btn"
                            class="px-2 bg-gray-100 border border-gray-300 hover:bg-gray-200">Replace</button>
                        <button id="replace-all-btn"
                            class="px-2 bg-gray-100 border border-gray-300 hover:bg-gray-200">Replace All</button>
                    </div>
                </div>

                <!-- Generic Info Modal (Path Browser / Module Browser) -->
                <div id="info-modal"
                    class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
                    <div
                        class="bg-white border-2 border-gray-400 p-1 shadow-xl w-[600px] h-[400px] flex flex-col text-[13px]">
                        <div
                            class="bg-gray-100 border-b border-gray-300 px-2 py-1 flex justify-between items-center mb-2">
                            <span id="info-modal-title" class="font-bold">Info</span>
                            <button id="close-info-modal" class="text-gray-500 hover:text-black">X</button>
                        </div>
                        <div class="flex-1 overflow-auto p-2 bg-white font-mono text-xs whitespace-pre"
                            id="info-modal-content">
                            <!-- Content goes here -->
                        </div>
                        <div class="flex justify-end gap-2 p-2 border-t border-gray-200 bg-gray-50">
                            <button id="close-info-btn"
                                class="px-3 py-1 bg-gray-200 border border-gray-400 hover:bg-gray-300">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Console Area -->
            <div class="h-[250px] flex border-t border-gray-300 bg-white font-mono text-[13px]" id="console-area">

                <!-- Main Console (Left) -->
                <div class="flex-1 flex flex-col overflow-hidden relative min-w-0">
                    <div
                        class="bg-gray-100 px-2 py-1 text-xs text-gray-500 border-b border-gray-200 flex justify-between select-none shrink-0">
                        <div class="flex items-center gap-2">
                            <!-- Mobile/Small screen toggle for sidebar could go here if needed -->
                            <span id="hide-console-area-btn"
                                class="material-symbols-outlined text-[14px] cursor-pointer hover:text-black hover:bg-gray-200 rounded px-1"
                                title="Hide Console">close</span>
                            <span class="font-bold text-gray-600" id="active-console-title">Interactive Console</span>
                        </div>
                        <div class="flex items-center gap-4">
                            <span class="cursor-pointer hover:text-red-500" id="pop-out-console-btn">Pop Out</span>
                            <span class="cursor-pointer hover:text-red-500" id="clear-console-btn">Clear</span>
                        </div>
                    </div>
                    <div class="flex-1 overflow-y-auto p-2" id="console-output">
                        <!-- Content will be injected by js -->
                    </div>
                    <div class="flex items-center border-t border-gray-200 px-2 bg-white shrink-0">
                        <span class="text-[var(--idle-keyword)] font-bold mr-2 select-none"
                            id="console-prompt">&gt;&gt;&gt;</span>
                        <input type="text"
                            class="flex-1 py-1 outline-none text-black bg-transparent border-none font-mono text-[13px] h-8"
                            id="console-input" autocomplete="off" spellcheck="false">
                    </div>
                </div>

                <!-- Console List Sidebar (Right) -->
                <div class="w-[180px] border-l border-gray-200 flex flex-col bg-gray-50 text-[12px] font-sans shrink-0">
                    <div
                        class="flex items-center justify-between px-2 py-1 border-b border-gray-200 bg-gray-100 h-[25px]">
                        <span class="font-bold text-gray-500 text-[10px] tracking-wider">SHELL SESSIONS</span>
                        <button id="add-console-btn"
                            class="hover:bg-gray-300 rounded text-gray-600 flex items-center justify-center p-0.5"
                            title="New Console">
                            <span class="material-symbols-outlined !text-[14px]">add</span>
                        </button>
                    </div>
                    <div id="console-list" class="flex-1 overflow-y-auto">
                        <!-- List Items -->
                    </div>
                </div>
            </div>
        </main>
        <aside class="w-[380px] bg-[var(--sidebar-bg)] border-l border-[var(--sidebar-border)] flex flex-col font-sans">
            <div class="px-4 py-2 flex items-center justify-between border-b border-[var(--sidebar-border)]">
                <div class="flex items-center gap-4">
                    <span
                        class="text-[11px] font-bold tracking-wider text-black border-b-2 border-black pb-0.5">CHAT</span>
                    <span class="material-symbols-outlined text-gray-400">more_horiz</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="sidebar-header-btn">
                        <span class="material-symbols-outlined">add</span>
                        <span class="material-symbols-outlined text-[10px]">keyboard_arrow_down</span>
                    </div>
                    <div class="sidebar-header-btn"><span class="material-symbols-outlined">settings</span></div>
                    <div class="sidebar-header-btn"><span class="material-symbols-outlined">more_horiz</span></div>
                    <div class="h-4 w-[1px] bg-gray-300 mx-1"></div>
                    <div class="sidebar-header-btn"><span class="material-symbols-outlined">fullscreen</span></div>
                    <div class="sidebar-header-btn"><span class="material-symbols-outlined">close</span></div>
                </div>
            </div>
            <div class="flex-1 flex flex-col items-center justify-center p-8 text-center">
                <div class="mb-4">
                    <span class="material-symbols-outlined text-gray-600 !text-6xl"
                        style="font-variation-settings: 'FILL' 0, 'wght' 200;">forum</span>
                </div>
                <h2 class="text-3xl font-medium text-gray-800 mb-2">Build with Agent</h2>
                <p class="text-sm text-gray-500 mb-4 leading-relaxed">AI responses may be inaccurate.</p>
                <div class="flex flex-col items-center gap-1">
                    <a class="text-[#0070f3] hover:underline text-sm font-medium" href="#">Generate Agent
                        Instructions</a>
                    <span class="text-sm text-gray-500">to onboard AI onto your codebase.</span>
                </div>
            </div>
            <div class="p-4">
                <div class="bg-white border border-gray-200 rounded-lg p-3 shadow-sm">
                    <button
                        class="flex items-center gap-1.5 text-[12px] text-gray-600 border border-gray-200 rounded px-2 py-1 mb-2 hover:bg-gray-50">
                        <span class="material-symbols-outlined !text-[14px]">attach_file</span>
                        Add Context...
                    </button>
                    <textarea
                        class="w-full border-none focus:ring-0 p-0 text-sm placeholder-gray-400 resize-none h-12 mb-2"
                        placeholder="Describe what to build next"></textarea>
                    <div class="flex items-center justify-between border-t border-gray-50 pt-2">
                        <div class="flex items-center gap-4">
                            <button class="flex items-center gap-1 text-[12px] text-gray-500 hover:text-black">
                                Agent <span class="material-symbols-outlined !text-[14px]">keyboard_arrow_down</span>
                            </button>
                            <button class="flex items-center gap-1 text-[12px] text-gray-500 hover:text-black">
                                Auto <span class="material-symbols-outlined !text-[14px]">keyboard_arrow_down</span>
                            </button>
                            <span
                                class="material-symbols-outlined text-gray-400 !text-[18px] cursor-pointer hover:text-black">build</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span
                                class="material-symbols-outlined text-gray-400 !text-[18px] cursor-pointer hover:text-black">shortcut</span>
                            <span class="material-symbols-outlined text-gray-300 !text-[20px]">send</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>
    <footer class="bg-[#f0f0f0] border-t border-gray-300 py-0.5 px-4 text-[11px] flex justify-end gap-10 select-none">
        <div>Ln: 25</div>
        <div>Col: 0</div>
    </footer>


    <div id="file-context-menu" class="context-menu hidden">
        <div class="context-menu-item" id="ctx-new-file">New File</div>
        <div class="context-menu-item" id="ctx-new-folder">New Folder</div>
        <div class="border-b border-gray-200 my-1"></div>
        <div class="context-menu-item" id="ctx-rename">Rename...</div>
        <div class="context-menu-item" id="ctx-delete" style="color: #d32f2f;">Delete</div>
    </div>
    <script src="renderer.js"></script>
</body>

</html>